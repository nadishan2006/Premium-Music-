<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Search Songs</title>
<script src="https://kit.fontawesome.com/e7e1ed9392.js" crossorigin="anonymous"></script>
<style>
  body {
  font-family: Arial, sans-serif;
  background-color: #121212;
  color: #ffffff;
  display: flex;
  flex-direction: column;
  align-items: center;
  margin: 0;
  overflow-x: hidden; /* Prevent x-axis scrollbar */
  }

  #search-form {
    margin-top: 20px;
  }

  #search-query {
    padding: 10px;
    font-size: 16px;
  }

  #search-results {
    margin-top: 20px;
    width: 90%;
  }

  .m-con {
    margin-bottom: 20px;
  }
  

  .m-box {
    background-color: #27272a;
    clear: both;
    width: 95%;
    border-radius: 10px;
    display: flex;
    align-items: center;
    position: relative;
    padding: 10px;
  }

  .img {
    flex-shrink: 0;
  }

  .img img {
    width: 75px;
    height: 75px;
    border-radius: 10px;
  }

  .text {
    color: white;
    font-size: 16px;
    max-font-size: 16px;
    margin-left: 20px;
    flex-grow: 1;
  }

  .text2 {
    color: white;
    font-size: 12px;
    margin-top: 5px;
  }

  .controls {
    color: #22c55e;
    display: flex;
    align-items: center;
    flex-shrink: 0;
    gap: 10px;
    margin-top: -25px;
    margin-left: 25px;
  }

  .time-1, .time-2 {
    color: white;
    font-size: 12px;
    margin-top: 0px;
  }

  .timeline {
    width: 60%;
    height: 3px;
    -webkit-appearance: none;
    appearance: none;
    background-color: #22c55e;
    border-radius: 5px;
  }

  .timeline::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 10px;
    height: 10px;
    background-color: #22c55e;
    border-radius: 50%;
    cursor: pointer;
  }

  .icon {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-top: 0px;
  }

  .icon-m, .heart, .dots {
    color: white;
    font-size: 18px;
    cursor: pointer;
    margin-top: 65px;
    
  }
  
  .icon-m {
    color: white;
    margin-left: -102%;
  }
  
  .heart {
  color: white;
  margin-left: 15%;
  }
  
  .dots {
  color: white;
  margin-left: 15%;
  }
  
  hr.li-n {
    color: #fff;
    width: 100%;
  }
  
  #search-form {
  position: relative;
  overflow: hidden;
  margin: 20px auto;
  width: 10%; /* Adjusted for better responsiveness */
  width: 350px; /* Added max-width for larger screens */
  }
  
  #search-query  {
  border: 0;
  box-shadow: 0 1px 2px 0 rgba(60, 64, 67, .30), 0 1px 3px 1px rgba(60, 64, 67, .15);
  padding: 20px 15px;
  border-radius: 30px; /* Adjusted for better appearance */
  width: calc(100% - 60px); /* Adjusted for icon width and padding */
  font-family: 'Google Sans';
  font-size: 16px;
  outline: none;
  }
  
  #search-form button {
  background: rgb(0, 270, 100);
  border: none;
  color: #000;
  font-family: 'Google Sans';
  text-transform: uppercase;
  font-weight: bold; /* Corrected typo */
  position: absolute;
  top: 50%;
  right: 20px; /* Adjusted for better alignment */
  transform: translateY(-50%);
  padding: 15px 30px;
  border-radius: 30px;
  cursor: pointer;
  outline: none;
  }
  
  #search-form button:hover {
  background: rgb(0, 270, 100);
  color: #000;
  transition: all 0.4s;
  }
  
  .fa-search {
  font-size: 20px; /* Adjust the size as needed */
  }
  
  .nav {
  background-color: rgba(0, 0, 0, 0.8); /* Transparent black (50% opacity) */
  color: rgb(0, 0, 0); /* Black color */
  text-align: center;
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 10%;
  z-index: 9999; /* Ensure the footer is above other content */
  }
  
  .footer-icons {
  display: flex;
  justify-content: space-around;
  font-size: 25px;
  padding: 10px 0;
  color: #fff;
  }
  
  .icon {
  text-align: center;
  margin-top: -10px;
  }
  
  .icon-name {
  font-size: 10px;
  margin-top: 45px;
  margin-left: -36px;
  }
  
  
  
  .menu-wap {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  z-index: 99999; /* Set a high z-index value */
  }
  
  #side-Menu {
  position: fixed;
  top: -20px;
  left: -92%; /* Start off-screen */
  width: 75%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.9);
  padding: 20px;
  transition: left 0.7s; /* Smooth transition for left position */
  z-index: 99999; /* Set a high z-index value */
  }
  
  
  #side-Menu.active {
  left: 0; /* Slide in from left */
  }
  
  .menu-itm img {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  margin-top: 15px;
  margin-right: 10px;
  }
  
  .menu-txt {
  color: #fff;
  font-size: 26px;
  margin-top: -40px;
  margin-left: 25%; /* Add margin instead of negative margin */
  }
  
  .new {
  color: ;
  font-size: 20px;
  margin-top: 45px;
  margin-left: -15%;
  }
  
  /* Hide content if the orientation is landscape */
  
  
  #link {
  display: inline; /* or another display value that suits your layout */
  text-decoration: none; /* removes the underline */
  color: inherit; /* sets the color to the parent element's color */
}

.hi-text {
  color: #fff;
  font-size:  29px;
}

#link {
  display: inline; /* or another display value that suits your layout */
  text-decoration: none; /* removes the underline */
  color: inherit; /* sets the color to the parent element's color */
}

 #groot {
   width: 10%;
   height: 10%;
 }
 
 .spo {
   color: ;
   margin-right: 20px;
 }
 
 
</style>
</head>
<body>

 <div id="menu-wap">
   <div id="side-Menu">
   <div class="menu-itm">
    <img src="https://i.ibb.co/kSQN5ZW/Screenshot-2024-0414-204428.jpg">
    <div class="menu-txt">
    <b>Premium Music</b>
        <div class="new">
          <a id="link" href="create your page.html">
        <b><i class="fa-solid fa-folder-plus" style="color: #ffffff;"></i> create your page</a>
        </div>
        <div class="new">
          <a id="link" href="this version.html">
        <i class="fa fa-android" aria-hidden="true" style="color: #fff;"></i> This Version
        
        </div></a>
        <div class="new">
          <a id="link" href="update.html">
        <i class="fa fa-level-up" aria-hidden="true" style="color: #fff;"></i> Update</a>
        </div>
        <div class="new">
     <a id="link" href="about.html">
        <i class="fa-solid fa-users" style="color: #ffffff;"></i> About us</a>
        </div>
        <div class="new">
   <a id="link" href="ads.html">
        <i class="fa-solid fa-rectangle-ad" style="color: #ffffff;"></i> Watch Ads</a>
        </div>
        <div class="new">
      <a id="link" href="contact.html">
        <i class="fa-regular fa-circle-question" style="color: #ffffff;"></i> Help Center </a>
        </div>
        <div class="new">
         <a id="link" href="t & c.html">
 <i class="fa-solid fa-fingerprint" style="color: #ffffff;"></i> Teams & police</b></a>
        </div>
    
        <div class="new">
         <a id="link" href="groot.html">
 <img id="groot" src="https://i.ibb.co/G39DVH4/m-ai.jpg"><b>Groot AI</b></a>
        </div>
        </div>
        <div class="fullow">
          
        </div>
   </div>
   </div>
   </div>
   </div>
   <script>
   let startX = null;
   let currentX = null;
   let menuOpen = false;
   
   document.addEventListener('touchstart', function(e) {
   startX = e.touches[0].clientX;
   currentX = startX;
   });
   
   document.addEventListener('touchmove', function(e) {
   if (!startX) return; // Exit if startX is null
   currentX = e.touches[0].clientX;
   if (startX < 20 && currentX - startX > 50) {
   menuOpen = true;
   document.getElementById('side-Menu').classList.add('active');
   e.preventDefault(); // Use preventDefault instead of stopPropagation
   }
   });
   
   document.addEventListener('touchend', function() {
   if (!menuOpen) {
   document.getElementById('side-Menu').classList.remove('active');
   }
   startX = null;
   currentX = null;
   menuOpen = false;
   });
   
   </script>
   
 <center>
 <div id="search-form">
 <input id="search-query" type="text" placeholder="Search here" required>
 <button type="submit" onclick="displaySearchResults(document.getElementById('search-query').value)">
  <i class='fa fa-search'></i>
 </button>
 </div>
 <script>
document.getElementById('myForm').addEventListener('submit', function(event) {
    event.preventDefault(); // Prevent the default form submission behavior
    document.querySelector('.hide-c').classList.add('hidden');
});
</script>
 </center>
 <div id="search-results"></div>
 <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            const apiKey = '98d9f7ef24a04baf8bd7515a2301972a';

            function fetchLocation(latitude, longitude) {
                const apiUrl = `https://api.opencagedata.com/geocode/v1/json?q=${latitude}+${longitude}&key=${apiKey}`;

                fetch(apiUrl)
                    .then(response => response.json())
                    .then(data => {
                        if (data && data.results && data.results.length > 0) {
                            const location = data.results[0].components;
                            const country = location.country;
                            const province = location.state || location.province || location.region;

                            document.getElementById('location').innerText = `Country: ${country}, Province: ${province}`;
                        } else {
                            document.getElementById('location').innerText = 'Location not found';
                        }
                    })
                    .catch(error => {
                        console.error('Error fetching location:', error);
                        document.getElementById('location').innerText = 'Error fetching location';
                    });
            }

            function getLocation() {
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(
                        (position) => {
                            const latitude = position.coords.latitude;
                            const longitude = position.coords.longitude;
                            fetchLocation(latitude, longitude);
                        },
                        (error) => {
                            console.error('Error getting location:', error);
                            document.getElementById('location').innerText = 'Error getting location';
                        }
                    );
                } else {
                    document.getElementById('location').innerText = 'Geolocation is not supported by this browser.';
                }
            }

            getLocation();
        });
    </script>
</head>
<body>
  <div class="hide-c">
    <div class="hi-text">
       <center><b>Search Your Favorite Song</b></center>
    </div>
    <div class="spo">
    <h1>Special Thanks</h1>
        <h2>Spotify&nbsp;<i class="fa-brands fa-spotify" style="color: #00ff00;"></i></h2>
     </spo>
</div>
<script>
    const clientId = '8ea7c1f85d9f45068ed331fc0c4fecde';
    const clientSecret = 'c2ef746610344160bccea552a81f7c85';

    async function fetchToken() {
      const res = await fetch('https://accounts.spotify.com/api/token', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/x-www-form-urlencoded',
          'Authorization': 'Basic ' + btoa(clientId + ':' + clientSecret)
        },
        body: 'grant_type=client_credentials'
      });
      const data = await res.json();
      return data.access_token;
    }

    async function searchSong(query, token) {
      const res = await fetch(`https://api.spotify.com/v1/search?q=${query}&type=track`, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      const data = await res.json();
      return data.tracks.items;
    }

    async function displaySearchResults(query) {
      const token = await fetchToken();
      const tracks = await searchSong(query, token);
      const resultsContainer = document.getElementById('search-results');
      resultsContainer.innerHTML = ''; // Clear previous results

      tracks.forEach((track, index) => {
        const trackElement = document.createElement('div');
        trackElement.classList.add('m-con');
        trackElement.innerHTML = `
          <hr class="li-n">
          <p>
          <div class="m-box">
          <div class="img">
          <img src="${track.album.images[0].url}" alt="${track.name}">
          </div>
          <break;>
          <div class="text">
          <b>${track.name}</b>
          <p class="text2">Released on ${new Date(track.album.release_date).toLocaleDateString()}</p>
          </div>
          <div class="controls">
          <input type="range" class="timeline" min="0" max="100" step="1">
          <div class="time-1" id="t1-${index}">0:00</div>
          <div class="time-2" id="t2-${index}">0:00</div>
          <audio id="audioPlayer-${index}" src="${track.preview_url}"></audio>
          <i id="playBtn-${index}" class="icon-m fas fa-play" onclick="playAudio(${index})"></i>
          <i id="pauseBtn-${index}" class="icon-m fas fa-pause" style="display: none;" onclick="pauseAudio(${index})"></i>
          <div class="heart" onclick="toggleHeart(${index})">
          <i id="heartIcon-${index}" class="fa-regular fa-heart"></i>
          </div>
          <div class="dots" onclick="downloadSong('${track.external_urls.spotify}')">
          <i class="fa-brands fa-spotify" style="color: #00ff00;"></i>
          </div>
          </div>
          </div>
        `;
        resultsContainer.appendChild(trackElement);
        setupAudioControls(`playBtn-${index}`, `pauseBtn-${index}`, `audioPlayer-${index}`, `t1-${index}`, `t2-${index}`);
      });
    }

    document.getElementById('search-form').addEventListener('submit', function(event) {
      event.preventDefault();
      const query = document.getElementById('search-query').value;
      displaySearchResults(query);
    });

    function setupAudioControls(playBtnId, pauseBtnId, audioPlayerId, timeId1, timeId2) {
      const audioPlayer = document.getElementById(audioPlayerId);
      const timeline = document.querySelector(`#${playBtnId}`).parentElement.querySelector('.timeline');
      const time1 = document.getElementById(timeId1);
      const time2 = document.getElementById(timeId2);

      audioPlayer.addEventListener('timeupdate', function() {
        const currentTime = audioPlayer.currentTime;
        const duration = audioPlayer.duration;
        const progress = (currentTime / duration) * 100;
        timeline.value = progress;

        // Update time display
        const minutes = Math.floor(currentTime / 60);
        const seconds = Math.floor(currentTime % 60).toString().padStart(2, '0');
        const endMinutes = Math.floor(duration / 60);
        const endSeconds = Math.floor(duration % 60).toString().padStart(2, '0');
        time1.textContent = `${minutes}:${seconds}`;
        time2.textContent = `${endMinutes}:${endSeconds}`;
      });

      timeline.addEventListener('input', function() {
        const seekTime = (timeline.value / 100) * audioPlayer.duration;
        audioPlayer.currentTime = seekTime;
      });
    }

    function toggleHeart(index) {
      const heartIcon = document.getElementById(`heartIcon-${index}`);
      heartIcon.classList.toggle('fa-regular');
      heartIcon.classList.toggle('fa-solid');
      heartIcon.style.color = heartIcon.classList.contains('fa-solid') ? '#ff1f80' : '#ffffff';
    }

    function playAudio(index) {
      const audioPlayer = document.getElementById(`audioPlayer-${index}`);
      const playBtn = document.getElementById(`playBtn-${index}`);
      const pauseBtn = document.getElementById(`pauseBtn-${index}`);
      audioPlayer.play();
      playBtn.style.display = 'none';
      pauseBtn.style.display = 'inline';
    }

    function pauseAudio(index) {
      const audioPlayer = document.getElementById(`audioPlayer-${index}`);
      const playBtn = document.getElementById(`playBtn-${index}`);
      const pauseBtn = document.getElementById(`pauseBtn-${index}`);
      audioPlayer.pause();
      playBtn.style.display = 'inline';
      pauseBtn.style.display = 'none';
    }

    function downloadSong(link) {
      window.open(link, '_blank');
    }
  </script>

    <div class="nav">
    <div class="footer-icons">
    <div class="icon">
    <a href="Music.html"><i class="fa-solid fa-music" style="color: rgb(255, 255, 255)"></i>
    </a><div class="icon-name">Music</div>
    </div>
    <div class="icon">
    <a href="Search.html"><i class="fa-solid fa-magnifying-glass" style="color: rgb(0, 270, 100)"></i>
    </a><div class="icon-name">Search</div>
    </div>
    <div class="icon">
    <a href="Trending.html"><i class="fa-solid fa-fire-flame-curved" style="color: #ffffff;"></i>
    </a><div class="icon-name">Trending</div>
    </div>
    </div>
    </div>
    
</body>
</html>